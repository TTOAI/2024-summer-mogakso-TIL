
#### 의존 관계 주입 방법
- [생성자 주입](#생성자-주입)
- [수정자 주입](#수정자-주입)
- [필드 주입](#필드-주입)
- [일반 메서드 주입](#일반-메서드-주입)

#### 생성자 주입
- 생성자 호출 시점에 딱 1번만 호출
- 불변, 필수 의존 관계에 사용
- 생성자가 하나면 @Autowired 생략해도 자동 주입됨

#### 수정자 주입
- setter를 이용
- 선택, 변경 가능성이 있는 의존 관계에 사용

#### 필드 주입
- 필드에 바로 주입하는 방법
- 외부에서 변경이 불가능하므로 테스트하기 힘듦
	- @Autowired는 스프링 컨테이너를 쓰는 경우에만 적용됨
	- 스프링 컨테이너를 사용하지 않고 테스트할 때, 생성자 주입과 수정자 주입에서는 필드에 임의로 다른 값을 넣을 수 있지만 필드 주입에서는 다른 값을 넣을 수 없음
- 애플리케이션의 실제 코드와 관계 없는 테스트 코드, 스프링 설정을 목적으로 하는 @Configuration 같은 곳에서만 특별한 용도로 사용

#### 일반 메서드 주입
- 일반 메서드를 통해 주입하는 방법\
- 일반적으로 잘 사용하지 않음

### DI 옵션 처리
- 주입할 스프링 빈이 없어도 동작해야 할 때
- @Autowired(required = false)
- @Nullable
- @Optional<Member\>

#### 생성자 주입의 장점
-  의존 관계 주입이 객체 생성 시에 한 번만 일어나므로 의존 관계를 불변하게 설계 가능
- 순수한 자바 코드로 테스트를 수행할 때 실수로 주입 데이터를 누락하더라도 컴파일 오류를 발생시켜 어떤 값을 필수로 주입해야 하는지 알 수 있음
	- 수정자 주입의 경우 컴파일 오류가 발생하지 않음
	- final 키워드
		- 생성자 주입을 사용하면 필드에 final 키워드 사용 가능
		- 생성자에서 값이 설정되지 않는 오류를 컴파일 시점에서 막을 수 있음

#### lombok 라이브러리
- 스프링 빈으로 등록되는 클래스에 @RequiredArgsConstructor를 붙이면 자동으로 final이 붙은 필드를 모아서 생성자를 만들어줌

#### 조회 빈이 2개 이상일 때
- 스프링 빈 조회에서 같은 타입이 2개 이상일 때 해결 방법
	- @Autowired 필드 명 매칭 시도
	- @Qualifier 사용
	- @Primary 사용
- @Autowired 필드 명 매칭 시도
	- 타입 매칭 결과가 2개 이상일 때 필드명, 파라미터 명으로 빈 이름 매칭 시도
- @Qualifier 사용
	- 빈 등록 시와 주입 시에 @Qualifier("{추가 구분자}")를 붙여 동일한 추가 구분자를 가진 빈끼리 매칭
	- 같은 추가 구분자를 가진 빈이 없을 경우 빈 이름 매칭
- @Primary 사용
	- @Autowired 시에 여러 빈이 매칭되면 @Primary가 우선권을 가짐
- 적용 방식
	- 우선순위: @Primary < @Qualifier (더 상세하게 설정)
	- 코드에서 자주 사용하는 스프링 빈에 @Primary를 적용
	- 같은 타입의 다른 빈으로 잠시 교체하고 싶을 경우 @Qualifier를 지정해서 명시적으로 획득

#### @Qualifier의 추가 구분자를 직접 애노테이션로 만들기
- @Qualifier("{추가 구분자}")를 붙인 애노테이션을 생성
- 컴파일 시 타입 혹은 오타 체크 가능

#### 같은 타입으로 조회한 빈이 모두 필요할 때 -> List, Map 사용
- 임의의 클래스에 key를 빈 이름, value를 같은 타입을 가진 빈으로 하는 Map을 필드로 생성함
- 임의의 타입으로 조회한 모든 빈을 담은 List를 필드로 생성함
- 생성자 주입을 통해 해당 빈에 의존 관계를 자동으로 주입함
- 해당 클래스를 스프링 빈으로 등록함

#### 컴포넌트 스캔, 의존 관계 자동 주입 vs 설정 정보를 통한 수동 빈 등록, 의존 관계 수동 주입
- 자동 기능을 기본으로 사용
- 로직에 따라 다른 전략 취하기
	- 업무 로직 빈
		- 수가 많음
		- 컨트롤러, 서비스, 리포지토리처럼 유사한 패턴이 있음
		- -> 문제 파악이 상대적으로 쉬우므로 자동 기능 적극 사용
	- 기술 지원 로직 빈
		- 수가 적음
		- 애플리케이션 전반에 광범위하게 영향을 미침
		- 문제 파악이 어려움
		- -> 수동 빈 등록을 통해 명확하게 드러내는 것이 좋음
- 비즈니스 로직 중에서 다형성을 적극 활용할 때
	- 해당 로직에서 어떤 빈들이 사용되는지 한 번에 파악하기 어려움
	- -> 별도의 설정 정보로 만들고 수동 빈 등록
	- -> 자동 빈 등록 후 관련 로직 구현 빈끼리 특정 패키지에 같이 묶어두기